# 图
图(Graph)是由顶点和连接顶点的边构成的离散结构。在计算机科学中，图是最灵活的数据结构之一，很多问题都可以使用图模型进行建模求解。例如：生态环境中不同物种的相互竞争、人与人之间的社交与关系网络、化学上用图区分结构不同但分子式相同的同分异构体、分析计算机网络的拓扑结构确定两台计算机是否可以通信、找到两个城市之间的最短路径等等。

## 目录
- [构成](###构成)
- [存储](###存储)
    - [数组存储](###双数组存储)
    - [链式存储](###脸书存储)

### 构成
一般来说，树的元素我们称为节点，图中的点我们称为顶点（vertex）,除了顶点外，还有链接顶点之间的边（edge）。和之前的树介绍不同，图中是允许存在环的，所以有你可以通过有没有环来确认一个数据结构是树还是图。

- 顶点（vertex）：图中的节点
- 边（edge）：链接图的作用
- 度（degree）：在无向图中度表示多少条边,有向图中有两种表示
    - 出度（out-degree）：箭头指向外的边的总数
    - 入度(in-degree):箭头指向当前节点的边的总数
- 权重（weight）: 权重是指每条边的权重

### 存储

#### 双数组存储
其实图这个数据结构还是比较简单的。我使用双数组来进行存储的话，第一个数组把所有顶点进行存储并把每个顶点进行存储编号。第二个数组用于存储每个节点的边的指向。

- 优点： 直观，快速
- 缺点： 耗费空间

简单讲解一下: 双数组的前提其实很简单，就是预设所有节点之间都是有关系的。那么其实没有关系的两个节点也是被存储起来了（即使你对应节点的值为0）但是也是耗费了一个空间进行存储了。如果你存储的是地图，比如a可以直接到达所有的地点：b\c\d,那么这种存储方式是非常合适的，但是如果说是存储用户之间的好友关系，那么这种方式就非常不合适了，比如我有100万用户，需要存储用户之间的信息。其实一个用户好友不过几千，但是我给每个用户分配存储关系的数组就是100w，显然这种场景是不太适用的。


#### 链表存储
使用链表存储其实可以理解一下哈希表的存储方式，最常用的哈希表存储是链式存储，每个节点存储的是一个链表，相同的，我们在做图的关系存储的时候也可以使用链表存储。

- 优点： 省空间
- 缺点：耗时间，比如发送一条消息给某个用户的好友，需要遍历一遍这个用户的好友列表，时间复杂度为O(n)


#### 优化存储
其实图的存储关系和哈希表的存储关系不太一样的地方是，哈希表产生的冲突始终是有限的，在一个哈希表应用过程中，会通过扩容和缩容来限制整体的哈希冲突值，而且这本身就是限制一个哈希函数的好坏的一个标准。但是对于这里图的应用场景来说，如果用来存储好友关系列表，其实是一个硬性存储指标。

我们可以将链表变化成跳表、平衡二叉查找树等高维数据结构缩短用户快速查找好友的需求。将时间复杂度由O(n)变化成O(logn)的时间复杂度。