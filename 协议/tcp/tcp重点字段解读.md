# 重点字段
其实我们在看tcp的时候单个包都知道他们的意思，但是实际上的情况是我们需要分析一些连续的tcp情况
单个字段的意思放在连续的包下就显得非常基础且重要了

## 目录 
- [sequence number ](###sequence number)
- [len](###len)
- [acknowledgment number ](###acknowledgment number)



###sequence number
这个字段表示的是序列号。每个数据包都需要一个序列号，这是保证数据顺序的前提，有了这个序列号我们就可以对分成多个包的内容进行排序了。
在tcp传输包的过程中我们可以不知道seq起始值，但是必须知道seq是用来干什么的，如何计算的。

- seq =上一个包的seq + 上一个包的length 

### len
在tcp协议中实际上没有这个字段，只有一个字段叫做header length ，但是这个和它不一样，这个表示整个tcp包的大小，这个字段只是wireshark
方便我们好查看给我们算出来的一个内容。 但是这里还有一个点需要注意的是：sequence 内容长度并不包含header，所以这个len 是不包括tcp 
header length 的。

- len = ip length - ip header length- tcp header length ， 一般来说就是ip 包长 -20 - 20 

### acknowledgment number
这个表示确认号，消息被确认的信号。这个值他也不是什么乱序的。要理解这个acknowledgment 这个值得含义还是要先理解一下tcp是连接。一般来说
你给某人发一条信息，怎么来确认对方收到了，你肯定不知道，只有对方和你说一句我收到了。

但是这里面有几个问题
- 对方要回复你说我收到了
- 如果你发的内容多，对方也要每个都说一下，不然可能漏掉
- 如果发的内容多，必须把每个都标注一下，比如说：我收到了A包裹

那么为了解决这样一个问题ACK就是这么做的

- acknowlegment = 上一个发送包的seq + 上一个发送包的length

##### 这里是正常发包流程
说到这里你大概感觉是不是acknowlegment 和下一个seq 应该是相等的呢？ 对的，我描述一下流程

- 发送方发包： a 包 ，seq =0 ，length =120
- 接受包回包： a 包收到，ack =120 
- 发送方发包：b 包，seq=120 ，length =89
- 接受方回包：b 包收到， ack =209 

为什么标题是正常发包流程呢？ 相信你也存在一点疑问？ 但是我在模拟上面的是正常的ab包的流程，但是在复杂的网络情况下我们的b包有可能
是比a包更加提前到达。

##### 接受方收到包如何保证顺序
 假设我们的包被拆分成为了：abc三个包，到达顺序分别是ca ，b丢失。 三个包长度都是1000 ，seq 起始长度为0

- 接受方： 收到c 包： seq=2000 ，length =1000 
- 接受方：发送ack = 3000
- 接受方： 收到a包，进行排序： seq=0 ，length=1000 
- 接受方发包： a包收到，ack = 1000

- 发送方： 收到a包的回执，将a包在缓冲区释放掉
- 发送方：未接收到2000 的回包，那么重传